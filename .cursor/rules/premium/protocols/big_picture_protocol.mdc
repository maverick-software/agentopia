---
description: Use big picture protocol when facing a recurrent, difficult problem or bug.
globs: 
alwaysApply: false
---
# ðŸ” Big Picture Protocol: Systematic Problem-Solving Framework

## ðŸ“‹ Overview

The Big Picture Protocol is a comprehensive methodology for approaching complex problems, recurring issues, and system-wide challenges. This protocol emphasizes **isolation-first debugging** combined with **holistic system analysis** to ensure both precise problem resolution and prevention of cascading failures.

## ðŸŽ¯ When to Use This Protocol

### âš ï¸ **Trigger Conditions**
- [ ] **Recurring Issues**: Same problem appears multiple times
- [ ] **Complex System Failures**: Multiple components affected
- [ ] **Mysterious Bugs**: Root cause is unclear or elusive
- [ ] **Performance Degradation**: System-wide performance issues
- [ ] **Integration Problems**: Issues spanning multiple services/layers
- [ ] **Post-Deployment Issues**: Problems after major changes
- [ ] **Cascading Failures**: One fix breaks something else

### ðŸš¨ **Emergency Situations**
- [ ] **Production Outages**: Critical system failures
- [ ] **Data Integrity Issues**: Potential data corruption or loss
- [ ] **Security Incidents**: Suspected security breaches
- [ ] **Performance Crises**: Severe performance degradation

---

## ðŸ”„ Phase 1: Historical Analysis & Pattern Recognition

### ðŸ“Š **1.1 Log Analysis Deep Dive**

#### **Primary Actions**
- [ ] **ðŸ“ Examine Historical Logs**
  - Review `/logs/` directory for similar error patterns
  - Analyze timestamps and frequency of occurrences
  - Cross-reference with deployment and change logs
  - Document patterns in error occurrence

- [ ] **ðŸ“ˆ Pattern Detection**
  - Identify recurring error signatures
  - Map error frequency to system events
  - Correlate with user activity patterns
  - Note environmental factors (time, load, etc.)

#### **Research Documentation**
Create: `/docs/troubleshooting/[issue_name]/historical_analysis.md`
- [ ] Error pattern timeline
- [ ] Frequency analysis charts
- [ ] Correlation with system events
- [ ] Previous resolution attempts

### ðŸ“‹ **1.2 Change Log Correlation**

#### **Primary Actions**
- [ ] **ðŸ” Recent Changes Review**
  - Examine git commit history for relevant timeframe
  - Review deployment logs and configuration changes
  - Analyze database migration history
  - Check third-party service updates

- [ ] **ðŸ”— Impact Mapping**
  - Map changes to affected system components
  - Identify potential cascade effects
  - Document change-to-error correlation
  - Assess change complexity and risk level

#### **Research Documentation**
Create: `/docs/troubleshooting/[issue_name]/change_correlation.md`
- [ ] Chronological change timeline
- [ ] Change impact assessment
- [ ] Risk correlation matrix
- [ ] Rollback feasibility analysis

---

## ðŸ”¬ Phase 2: Issue Isolation & Root Cause Analysis

### ðŸŽ¯ **2.1 Controlled Environment Reproduction**

#### **Primary Actions**
- [ ] **ðŸ§ª Environment Setup**
  - Create isolated test environment
  - Replicate production conditions
  - Minimize external variables
  - Document environment configuration

- [ ] **ðŸ”„ Systematic Reproduction**
  - Follow exact steps to reproduce issue
  - Vary conditions to understand triggers
  - Document reproduction success rate
  - Identify minimum conditions for failure

#### **Research Documentation**
Create: `/docs/troubleshooting/[issue_name]/reproduction_steps.md`
- [ ] Step-by-step reproduction guide
- [ ] Environment requirements
- [ ] Success/failure conditions
- [ ] Variable impact analysis

### ðŸŽ›ï¸ **2.2 Component Isolation Testing**

#### **Primary Actions**
- [ ] **ðŸ”§ Feature Disabling**
  - Systematically disable related features
  - Test core functionality in isolation
  - Identify minimum failing configuration
  - Document component dependencies

- [ ] **ðŸ“Š Targeted Testing**
  - Run unit tests for affected components
  - Execute integration tests for related systems
  - Perform load testing on isolated components
  - Validate data flow through isolated paths

#### **Research Documentation**
Create: `/docs/troubleshooting/[issue_name]/isolation_results.md`
- [ ] Component isolation matrix
- [ ] Test results summary
- [ ] Dependency mapping
- [ ] Failure point identification

---

## ðŸŒ Phase 3: Dependency Mapping & System Analysis

### ðŸ”— **3.1 Upstream Dependency Analysis**

#### **Primary Actions**
- [ ] **â¬†ï¸ Input Dependencies**
  - Map all data sources and inputs
  - Identify external service dependencies
  - Analyze configuration dependencies
  - Document authentication/authorization chains

- [ ] **ðŸ” Dependency Health Check**
  - Validate all upstream services
  - Check data quality and consistency
  - Verify configuration integrity
  - Test authentication flows

#### **Research Documentation**
Create: `/docs/troubleshooting/[issue_name]/upstream_dependencies.md`
- [ ] Dependency diagram
- [ ] Health status matrix
- [ ] Data flow analysis
- [ ] Critical path identification

### ðŸ”— **3.2 Downstream Impact Assessment**

#### **Primary Actions**
- [ ] **â¬‡ï¸ Output Dependencies**
  - Map all dependent systems and features
  - Identify affected user workflows
  - Analyze data propagation paths
  - Document integration points

- [ ] **ðŸ“Š Impact Severity Analysis**
  - Assess user impact severity
  - Evaluate business process disruption
  - Calculate potential data integrity risks
  - Estimate performance degradation scope

#### **Research Documentation**
Create: `/docs/troubleshooting/[issue_name]/downstream_impact.md`
- [ ] Impact severity matrix
- [ ] Affected user workflows
- [ ] Business process disruption analysis
- [ ] Risk assessment summary

---

## ðŸŽ¯ Phase 4: System-Wide Impact Evaluation

### ðŸ”„ **4.1 Cascading Effect Analysis**

#### **Primary Actions**
- [ ] **ðŸŒŠ Chain Reaction Mapping**
  - Identify potential cascade failure points
  - Map interconnected system dependencies
  - Analyze feedback loops and circular dependencies
  - Document system resilience points

- [ ] **âš–ï¸ Fix Impact Simulation**
  - Model potential fix implementations
  - Simulate system behavior with proposed changes
  - Identify potential new failure points
  - Assess resource utilization changes

#### **Research Documentation**
Create: `/docs/troubleshooting/[issue_name]/cascade_analysis.md`
- [ ] Cascade failure scenarios
- [ ] System resilience assessment
- [ ] Fix impact simulation results
- [ ] Risk mitigation strategies

### ðŸ›¡ï¸ **4.2 System Stability Assessment**

#### **Primary Actions**
- [ ] **ðŸ“Š Performance Baseline**
  - Establish current system performance metrics
  - Document resource utilization patterns
  - Analyze system load distribution
  - Identify performance bottlenecks

- [ ] **ðŸ”’ Stability Risk Evaluation**
  - Assess system stability under various loads
  - Evaluate error handling robustness
  - Test failover and recovery mechanisms
  - Document system breaking points

#### **Research Documentation**
Create: `/docs/troubleshooting/[issue_name]/stability_assessment.md`
- [ ] Performance baseline metrics
- [ ] Load testing results
- [ ] Stability risk matrix
- [ ] Recovery capability analysis

---

## ðŸ¤– Phase 5: AI-Assisted Analysis & Pattern Recognition

### ðŸ“Š **5.1 Intelligent Log Analysis**

#### **Primary Actions**
- [ ] **ðŸ” Anomaly Detection**
  - Use AI tools to identify log anomalies
  - Detect unusual patterns in system behavior
  - Correlate multiple data sources
  - Identify hidden relationships

- [ ] **ðŸ“ˆ Trend Analysis**
  - Analyze long-term system trends
  - Identify gradual degradation patterns
  - Predict potential future failures
  - Correlate with external factors

#### **Research Documentation**
Create: `/docs/troubleshooting/[issue_name]/ai_analysis.md`
- [ ] Anomaly detection results
- [ ] Trend analysis findings
- [ ] Correlation discoveries
- [ ] Predictive insights

### ðŸ§  **5.2 Historical Pattern Matching**

#### **Primary Actions**
- [ ] **ðŸ”„ Similar Issue Analysis**
  - Query historical data for similar patterns
  - Compare resolution strategies and outcomes
  - Identify recurring root causes
  - Analyze fix effectiveness over time

- [ ] **ðŸ“š Knowledge Base Integration**
  - Cross-reference with known issue database
  - Identify applicable best practices
  - Leverage previous solution strategies
  - Document pattern evolution

#### **Research Documentation**
Create: `/docs/troubleshooting/[issue_name]/pattern_matching.md`
- [ ] Historical pattern analysis
- [ ] Similar issue comparison
- [ ] Best practice recommendations
- [ ] Solution strategy evaluation

---

## ðŸ§ª Phase 6: Preemptive Testing & Validation

### ðŸ”¬ **6.1 Sandbox Environment Testing**

#### **Primary Actions**
- [ ] **ðŸ—ï¸ Test Environment Setup**
  - Create production-like test environment
  - Implement comprehensive monitoring
  - Set up automated testing pipelines
  - Configure rollback mechanisms

- [ ] **ðŸ§ª Solution Validation**
  - Test proposed solutions in isolation
  - Validate fix effectiveness
  - Assess performance impact
  - Verify no new issues introduced

#### **Research Documentation**
Create: `/docs/troubleshooting/[issue_name]/sandbox_testing.md`
- [ ] Test environment specifications
- [ ] Solution validation results
- [ ] Performance impact analysis
- [ ] Regression testing outcomes

### ðŸ“Š **6.2 Monitoring & Alert Setup**

#### **Primary Actions**
- [ ] **ðŸ“ˆ Enhanced Monitoring**
  - Implement targeted monitoring for affected areas
  - Set up real-time alerting systems
  - Create performance dashboards
  - Configure automated health checks

- [ ] **ðŸš¨ Early Warning Systems**
  - Establish threshold-based alerts
  - Implement predictive monitoring
  - Create escalation procedures
  - Document response protocols

#### **Research Documentation**
Create: `/docs/troubleshooting/[issue_name]/monitoring_setup.md`
- [ ] Monitoring configuration details
- [ ] Alert threshold definitions
- [ ] Dashboard specifications
- [ ] Response protocol documentation

---

## ðŸ“š Phase 7: Documentation & Knowledge Management

### ðŸ“ **7.1 Comprehensive Documentation**

#### **Primary Actions**
- [ ] **ðŸ“– Solution Documentation**
  - Document complete problem analysis
  - Record solution implementation steps
  - Create troubleshooting guides
  - Update system architecture documentation

- [ ] **ðŸ”„ Process Improvement**
  - Update troubleshooting procedures
  - Enhance monitoring and alerting
  - Improve system resilience
  - Document lessons learned

#### **Research Documentation**
Create: `/docs/troubleshooting/[issue_name]/solution_documentation.md`
- [ ] Complete problem analysis
- [ ] Solution implementation guide
- [ ] Troubleshooting procedures
- [ ] Process improvement recommendations

### ðŸŽ“ **7.2 Knowledge Base Enhancement**

#### **Primary Actions**
- [ ] **ðŸ“š Knowledge Base Updates**
  - Add new troubleshooting patterns
  - Update best practice guidelines
  - Enhance error code documentation
  - Create preventive maintenance guides

- [ ] **ðŸ”„ Continuous Improvement**
  - Schedule regular system health reviews
  - Implement proactive monitoring
  - Establish preventive maintenance schedules
  - Create training materials for team

#### **Research Documentation**
Create: `/docs/troubleshooting/[issue_name]/knowledge_base_updates.md`
- [ ] New pattern documentation
- [ ] Best practice updates
- [ ] Preventive maintenance procedures
- [ ] Training material specifications

---

## âœ… Success Criteria & Validation

### ðŸŽ¯ **Problem Resolution Validation**
- [ ] **âœ… Issue Completely Resolved**: Original problem no longer occurs
- [ ] **âœ… No Regression Issues**: No new problems introduced
- [ ] **âœ… Performance Maintained**: System performance not degraded
- [ ] **âœ… Stability Improved**: System stability enhanced or maintained

### ðŸ“Š **System Health Validation**
- [ ] **âœ… All Tests Passing**: Comprehensive test suite passes
- [ ] **âœ… Monitoring Green**: All monitoring systems show healthy status
- [ ] **âœ… Performance Metrics**: Performance within acceptable ranges
- [ ] **âœ… User Experience**: User workflows function correctly

### ðŸ“š **Documentation Validation**
- [ ] **âœ… Complete Documentation**: All phases documented thoroughly
- [ ] **âœ… Knowledge Base Updated**: Troubleshooting knowledge enhanced
- [ ] **âœ… Procedures Updated**: System procedures reflect changes
- [ ] **âœ… Team Training**: Team understands new procedures

---

## ðŸš¨ Emergency Procedures & Rollback

### âš¡ **Immediate Response Protocol**

#### **Critical System Failure**
1. **ðŸš¨ Immediate Assessment** (0-5 minutes)
   - Assess system impact and user effect
   - Determine if rollback is necessary
   - Activate incident response team
   - Implement temporary workarounds if possible

2. **ðŸ”„ Rapid Rollback** (5-15 minutes)
   - Execute pre-planned rollback procedures
   - Restore from known good state
   - Verify system functionality
   - Communicate status to stakeholders

3. **ðŸ“Š Post-Incident Analysis** (After resolution)
   - Conduct thorough post-mortem
   - Document incident timeline
   - Identify prevention measures
   - Update emergency procedures

### ðŸ›¡ï¸ **Rollback Procedures**

#### **Automated Rollback**
- [ ] **Database Rollback**: Restore from backup or revert migrations
- [ ] **Code Rollback**: Revert to previous stable version
- [ ] **Configuration Rollback**: Restore previous configuration
- [ ] **Service Rollback**: Restart services with previous settings

#### **Manual Rollback**
- [ ] **Step-by-Step Reversal**: Manually reverse each change
- [ ] **Component-by-Component**: Rollback individual components
- [ ] **Gradual Restoration**: Incrementally restore functionality
- [ ] **Validation at Each Step**: Verify system health after each rollback step

---

## ðŸ”„ Continuous Improvement Framework

### ðŸ“Š **Regular Review Schedule**
- [ ] **Weekly**: Review recent issues and patterns
- [ ] **Monthly**: Analyze system health trends
- [ ] **Quarterly**: Comprehensive system assessment
- [ ] **Annually**: Complete protocol review and update

### ðŸŽ¯ **Improvement Metrics**
- [ ] **Resolution Time**: Average time to resolve issues
- [ ] **Recurrence Rate**: Frequency of recurring problems
- [ ] **System Stability**: Uptime and reliability metrics
- [ ] **Team Efficiency**: Troubleshooting effectiveness

### ðŸ“š **Knowledge Evolution**
- [ ] **Pattern Recognition**: Continuously improve pattern detection
- [ ] **Tool Enhancement**: Upgrade analysis and monitoring tools
- [ ] **Process Optimization**: Streamline troubleshooting procedures
- [ ] **Team Development**: Enhance team troubleshooting skills

---

## ðŸŽ¯ Why Isolation Matters in Big Picture Thinking

### ðŸ” **Precision Benefits**
- **ðŸŽ¯ Root Cause Focus**: Prevents fixing symptoms instead of causes
- **ðŸ§ª Controlled Environment**: Ensures reliable debugging conditions
- **ðŸ›¡ï¸ Risk Mitigation**: Reduces risk of breaking other components
- **ðŸ“Š Clear Attribution**: Determines if issues are independent or systemic

### ðŸŒ **Holistic Benefits**
- **ðŸ”— System Understanding**: Reveals interconnected dependencies
- **âš¡ Cascade Prevention**: Prevents one fix from causing multiple failures
- **ðŸ“ˆ Performance Optimization**: Identifies system-wide optimization opportunities
- **ðŸ› ï¸ Architecture Improvement**: Guides system architecture enhancements

### ðŸŽ“ **Long-term Benefits**
- **ðŸ“š Knowledge Building**: Creates comprehensive troubleshooting knowledge base
- **ðŸ”„ Process Improvement**: Continuously enhances debugging methodologies
- **ðŸŽ¯ Proactive Prevention**: Enables proactive issue prevention
- **ðŸ‘¥ Team Development**: Builds team expertise in systematic problem-solving

---

## ðŸ“‹ Quick Reference Checklist

### ðŸš€ **Phase Completion Checklist**
- [ ] **Phase 1**: Historical analysis and pattern recognition complete
- [ ] **Phase 2**: Issue isolation and root cause analysis complete
- [ ] **Phase 3**: Dependency mapping and system analysis complete
- [ ] **Phase 4**: System-wide impact evaluation complete
- [ ] **Phase 5**: AI-assisted analysis complete
- [ ] **Phase 6**: Preemptive testing and validation complete
- [ ] **Phase 7**: Documentation and knowledge management complete

### âœ… **Final Validation Checklist**
- [ ] **Problem Resolved**: Original issue completely addressed
- [ ] **No Regressions**: No new issues introduced
- [ ] **Documentation Complete**: All phases thoroughly documented
- [ ] **Knowledge Updated**: Troubleshooting knowledge base enhanced
- [ ] **Team Informed**: Team understands resolution and prevention
- [ ] **Monitoring Active**: Enhanced monitoring in place
- [ ] **Procedures Updated**: System procedures reflect improvements

---

> **ðŸ’¡ Remember**: By incorporating isolation within a big-picture framework, debugging becomes both **precise and comprehensive**, leading to smarter, system-wide solutions instead of short-term patches. This protocol ensures that every problem becomes an opportunity to strengthen the entire system.